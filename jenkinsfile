pipeline {
    agent any 
    tools{
        maven 'Maven'
    }
    stages{
        stage("Building stage") {
            steps{
                echo "Building Application into .jar..."
                sh "mvn clean package"
            }
        }

        stage("Packaging stage") {
            steps{
                echo "Packaging Application into DockerImage..."
                withCredentials([usernamePassword{(credentailsid:'DockerHub-secret', passwordVariable:'PASS', usernameVariable: 'USER')]{
                sh "docker build -t sunkafob360/simple-java-app:1.0 ."
                sh "echo $PASS | docker login -u $USER --password-stdin "
                sh "docker push sunkafob360/simple-java-app:1.0"           
                }
                
            }
        
        }

        stage("Deploy stage") {
            steps{
                echo "Deploy Application..."
            }
        
        }

     }
}
    
